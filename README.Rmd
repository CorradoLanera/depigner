---
title: "depigner: package of utilities for _pignas_."
output: github_document
bibliography: 'inst/bib/doc-pkg.bib'
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

[![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![CRAN status](https://www.r-pkg.org/badges/version/depigner)](https://cran.r-project.org/package=depigner)
[![Travis build status](https://travis-ci.org/CorradoLanera/depigner.svg?branch=master)](https://travis-ci.org/CorradoLanera/depigner)
[![Coverage status](https://codecov.io/gh/CorradoLanera/depigner/branch/master/graph/badge.svg)](https://codecov.io/github/CorradoLanera/depigner?branch=master)

```{r include = FALSE}
knitr::opts_chunk$set(
  eval     = TRUE,
  collapse = TRUE,
  comment  = "#>"
)
library(magrittr)
library(pander)
```

## Overview
This package collect usefull function frequently used at the Unit of
Biostatistics, Epidemiology and Public Health of the Department of Cardiac,
Thoracic and Vascular sciences at the university of Padova.


## Install
You can install the development version from
[GitHub](https://github.com/) with the following procedure:

```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("CorradoLanera/depigner")
```

## Provided function

- **`summary_interact()`**: produce a data frame of OR (with the
  corresponding CI95%) for the interactions between different
  combination of a continuous variable (for which it is possible to
  define the reference and the target values) and (every or a selection
  of levels of) a categorical one in a logistic model provided by
  `lrm()` (from the `rms` package [@R-rms]).

```{r, include = FALSE}
library(depigner)
library(rms)
  options(datadist = 'dd')
library(survival)
library(pander)
  
data('transplant')
censor_rows <- transplant[['event']] != 'censored' 
transplant <- transplant[censor_rows, , drop = FALSE]

dd <- datadist(transplant)

lrm_mod <- lrm(event ~ rcs(age, 3)*(sex + abo) + rcs(year, 3),
  data = transplant
)
```

```{r}
summary_interact(lrm_mod, age, abo) %>%
  pander()

summary_interact(lrm_mod, age, abo, p = TRUE) %>%
  pander()

```
  

- **`tidy_summary()`**: produces a data frame from the `summary()`
  functions provided by **Hmisc** and **rms** packages. 
  At the moment it is tested only for method _reverse_

```{r}
dd <- datadist(iris)
my_summary <- summary(Species ~., data = iris, method = "reverse")
tidy_summary(my_summary) %>% 
  pander()


dd <- datadist(heart)
surv <- Surv(heart$start, heart$stop, heart$event)
f    <- cph(surv ~ age + year + surgery, data = heart)
my_summary <- summary(f)
tidy_summary(my_summary) %>% 
  pander()
```
## Provided data
- **`ubesp_pkg`**: main packages uses at UBESP

## Feature request
If you need some more features, please open an issue on
[github](https://github.com/CorradoLanera/depigner/issues).


## Bug reports
If you encounter a bug, please file a
[reprex](https://github.com/tidyverse/reprex)
(minimal reproducible example) on
[github](https://github.com/CorradoLanera/depigner/issues).

## Code of Conduct
Please note that the 'depigner' project is released with a
[Contributor Code of Conduct](.github/CODE_OF_CONDUCT.md).
By contributing to this project, you agree to abide by its terms.

<!--=========================================================================-->

## Reference

```{r bib, include=FALSE, eval = TRUE}
# create a bib file for the R packages used in this document
knitr::write_bib(
  x    = c('rms'),
  file = 'inst/bib/doc-pkg.bib'
)
```
